############################# Filebeat #####################################

filebeat.inputs:

- type: log
  paths:
    - /var/log/pi_portal.door.log
  fields:
    logzio_codec: plain
    token: <<LOGZ_IO_CODE>>
    type: pi_portal
  fields_under_root: true
  encoding: utf-8
  ignore_older: 12h

- type: log
  paths:
    - /var/log/pi_portal.temperature.log
  fields:
    logzio_codec: plain
    token: <<LOGZ_IO_CODE>>
    type: pi_portal_temperature
  fields_under_root: true
  encoding: utf-8
  ignore_older: 12h

- type: log
  paths:
    - /var/log/pi_portal.slack_bot.log
    - /var/log/pi_portal.slack_client.log
  fields:
    logzio_codec: plain
    token: <<LOGZ_IO_CODE>>
    type: pi_portal_slack
  fields_under_root: true
  encoding: utf-8
  ignore_older: 12h

- type: log
  paths:
    - /var/log/syslog
    - /var/log/auth.log
  fields:
    logzio_codec: plain
    token: <<LOGZ_IO_CODE>>
    type: pi_portal_system
  fields_under_root: true
  encoding: utf-8
  ignore_older: 12h

#For version 6.x and lower
#filebeat.registry_file: /var/lib/filebeat/registry

#For version 7 and higher
filebeat.registry.path: /var/lib/filebeat

#The following processors are to ensure compatibility with version 7
processors:
- rename:
    fields:
     - from: "agent"
       to: "beat_agent"
    ignore_missing: true
- rename:
    fields:
     - from: "log.file.path"
       to: "source"
    ignore_missing: true

############################# Output ##########################################

output:
  logstash:
    hosts: ["listener.logz.io:5015"]
    ssl:
      certificate_authorities: ['/etc/pki/tls/certs/COMODORSADomainValidationSecureServerCA.crt']
